{"ast":null,"code":"import _classCallCheck from\"/Users/yueshanlin/Documents/capstoneProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/yueshanlin/Documents/capstoneProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/yueshanlin/Documents/capstoneProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/yueshanlin/Documents/capstoneProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/yueshanlin/Documents/capstoneProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import*as d3 from'd3';import{scaleLinear}from'd3-scale';import{max}from'd3-array';import{select}from'd3-selection';var LocalContractor=/*#__PURE__*/function(_Component){_inherits(LocalContractor,_Component);var _super=_createSuper(LocalContractor);function LocalContractor(props){var _this;_classCallCheck(this,LocalContractor);_this=_super.call(this,props);_this.createBarChart=_this.createBarChart.bind(_assertThisInitialized(_this));return _this;}_createClass(LocalContractor,[{key:\"componentDidMount\",value:function componentDidMount(){this.createBarChart();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){this.createBarChart();}},{key:\"createBarChart\",value:function createBarChart(){var data=this.props.data;var margin={top:20,right:0,bottom:30,left:0};var svgWidth=541,svgHeight=362;var height=svgHeight-margin.top-margin.bottom,width=svgWidth-margin.left-margin.right;var sourceNames=[],sourceCount=[];var color=\"#C0CEDB\";var topColor='#ABC24D';var x=d3.scaleBand().rangeRound([0,width]).padding(0.1),y=d3.scaleLinear().rangeRound([height,0]);for(var key in data){if(data[key].name.length>0){sourceNames.push(data[key].name);sourceCount.push(data[key].value);}}x.domain(sourceNames);y.domain([0,d3.max(sourceCount,function(d){return d;})]);var svg=select(this.node).append(\"svg\");svg.attr('height',svgHeight).attr('width',svgWidth);svg=svg.append(\"g\").attr(\"transform\",\"translate(\"+margin.left+\",\"+margin.top+\")\");svg.append(\"g\").attr(\"class\",\"axis axis--x\").attr(\"transform\",\"translate(0,\"+height+\")\").call(d3.axisBottom(x));// svg.append(\"g\")\n//     .attr(\"class\", \"axis axis--y\")\n//     .call(d3.axisLeft(y).ticks(5))\n//     ;\n// Create rectangles\nvar bars=svg.selectAll('.bar').data(data).enter().append(\"g\");bars.append('rect').attr('class','bar').attr(\"fill\",function(d,i){return i<2?topColor:color;}).attr(\"x\",function(d){return x(d.name);}).attr(\"y\",function(d){return y(d.value);}).attr(\"width\",x.bandwidth()).attr(\"height\",function(d){return height-y(d.value);});bars.append(\"text\").text(function(d){return d.value;}).attr(\"x\",function(d){return x(d.name)+x.bandwidth()/2;}).attr(\"y\",function(d){return y(d.value)-5;}).attr(\"font-family\",\"sans-serif\").attr(\"font-size\",\"14px\").attr(\"fill\",\"black\").attr(\"text-anchor\",\"middle\");}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"svg\",{ref:function ref(node){return _this2.node=node;},width:541,height:362});}}]);return LocalContractor;}(Component);export default LocalContractor;","map":{"version":3,"sources":["/Users/yueshanlin/Documents/capstoneProject/src/components/DetailContent/LocalContractors.js"],"names":["React","Component","d3","scaleLinear","max","select","LocalContractor","props","createBarChart","bind","data","margin","top","right","bottom","left","svgWidth","svgHeight","height","width","sourceNames","sourceCount","color","topColor","x","scaleBand","rangeRound","padding","y","key","name","length","push","value","domain","d","svg","node","append","attr","call","axisBottom","bars","selectAll","enter","i","bandwidth","text"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport * as d3 from 'd3';\r\nimport { scaleLinear } from 'd3-scale'\r\nimport { max } from 'd3-array'\r\nimport { select } from 'd3-selection'\r\n\r\nclass LocalContractor extends Component {\r\n   constructor(props){\r\n      super(props)\r\n      this.createBarChart = this.createBarChart.bind(this)\r\n   }\r\n\r\n   componentDidMount() {\r\n      this.createBarChart()\r\n   }\r\n   componentDidUpdate() {\r\n      this.createBarChart()\r\n   }\r\n\r\n\r\n   createBarChart() {\r\n\r\nlet data = this.props.data;\r\nlet margin = {top: 20, right: 0, bottom: 30, left: 0};\r\nlet svgWidth = 541, svgHeight = 362;\r\nlet height = svgHeight- margin.top- margin.bottom, width = svgWidth - margin.left - margin.right;\r\nlet sourceNames = [], sourceCount = [];\r\nconst color = \"#C0CEDB\";\r\nconst topColor = '#ABC24D';\r\n\r\n\r\nlet x = d3.scaleBand().rangeRound([0, width]).padding(0.1),\r\n    y = d3.scaleLinear().rangeRound([height, 0]);\r\nfor(let key in data){\r\n    if(data[key].name.length > 0) {\r\n        sourceNames.push(data[key].name);\r\n        sourceCount.push(data[key].value);}\r\n    \r\n}\r\nx.domain(sourceNames);\r\ny.domain([0, d3.max(sourceCount, function(d) { return d; })]);\r\n\r\nlet svg = select(this.node).append(\"svg\");\r\nsvg.attr('height', svgHeight)\r\n    .attr('width', svgWidth);\r\n\r\nsvg = svg.append(\"g\")\r\n         .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\r\n\r\nsvg.append(\"g\")\r\n    .attr(\"class\", \"axis axis--x\")\r\n    .attr(\"transform\", \"translate(0,\" + height + \")\")\r\n    .call(d3.axisBottom(x));\r\n\r\n// svg.append(\"g\")\r\n//     .attr(\"class\", \"axis axis--y\")\r\n//     .call(d3.axisLeft(y).ticks(5))\r\n//     ;\r\n        \r\n// Create rectangles\r\nlet bars = svg.selectAll('.bar')\r\n    .data(data)\r\n    .enter()\r\n    .append(\"g\");\r\n\r\nbars.append('rect')\r\n    .attr('class', 'bar')\r\n    .attr(\"fill\", (d,i) => {return i<2?topColor:color})\r\n    .attr(\"x\", d => { return x(d.name); })\r\n    .attr(\"y\", d => { return y(d.value); })\r\n    .attr(\"width\", x.bandwidth())\r\n    .attr(\"height\", d => { return height - y(d.value); });\r\n    \r\nbars.append(\"text\")\r\n    .text(d => { \r\n        return d.value;\r\n    })\r\n    .attr(\"x\", d => {\r\n        return x(d.name) + x.bandwidth()/2;\r\n    })\r\n    .attr(\"y\", d => {\r\n        return y(d.value) - 5;\r\n    })\r\n    .attr(\"font-family\" , \"sans-serif\")\r\n    .attr(\"font-size\" , \"14px\")\r\n    .attr(\"fill\" , \"black\")\r\n    .attr(\"text-anchor\", \"middle\");\r\n\r\n\r\n\r\n   }\r\n\r\nrender() {\r\n          return <svg ref={node => this.node = node}\r\n      width={541} height={362}>\r\n      </svg>\r\n   }\r\n}\r\nexport default LocalContractor\r\n\r\n\r\n "]},"metadata":{},"sourceType":"module"}