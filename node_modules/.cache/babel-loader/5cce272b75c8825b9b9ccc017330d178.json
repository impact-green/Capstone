{"ast":null,"code":"import _classCallCheck from\"/Users/yueshanlin/Documents/capstoneProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/yueshanlin/Documents/capstoneProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/yueshanlin/Documents/capstoneProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/yueshanlin/Documents/capstoneProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/yueshanlin/Documents/capstoneProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import Swiper from'../components/Swiper/Swiper';import Filter from'../components/Filter/Filter';import FilterResult from'../components/FilterResult/FilterResult';import{filterResults}from'./config';var InvestorPortal=/*#__PURE__*/function(_React$Component){_inherits(InvestorPortal,_React$Component);var _super=_createSuper(InvestorPortal);function InvestorPortal(props){var _this;_classCallCheck(this,InvestorPortal);_this=_super.call(this,props);_this.state={bonds:[],filteredBonds:[],hash:''};_this.fetchBonds=_this.fetchBonds.bind(_assertThisInitialized(_this));_this.applyFilter=_this.applyFilter.bind(_assertThisInitialized(_this));return _this;}_createClass(InvestorPortal,[{key:\"applyFilter\",value:function applyFilter(funding,fundingArray,bondType,bondTypeArray,year,yearArray,sdg,sdgsArray){var temp=this.state.bonds.filter(function(bond){if(sdg=='all')return true;else{var result=false;sdgsArray.forEach(function(item){if(bond.sdgs.indexOf(item)>-1)result=true;});return result;}});temp=temp.filter(function(bond){if(funding=='all')return true;else{return fundingArray.includes(bond.series);}});temp=temp.filter(function(bond){if(bondType=='all')return true;else{return bondTypeArray.includes(bond.bond_type);}});temp=temp.filter(function(bond){if(year=='all')return true;else{return yearArray.includes(bond.issue_year.toString());}});this.setState({filteredBonds:temp});}},{key:\"fetchBonds\",value:function fetchBonds(){var _this2=this;fetch('http://localhost:8000/api/bond').then(function(response){return response.json();}).then(function(data){return _this2.setState({bonds:data,filteredBonds:data});});}},{key:\"componentWillMount\",value:function componentWillMount(){this.fetchBonds();}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"Header\"},/*#__PURE__*/React.createElement(Swiper,null),/*#__PURE__*/React.createElement(Filter,{changeFilter:this.applyFilter}),filterResults.map(function(item){return/*#__PURE__*/React.createElement(FilterResult,{result:item,bonds:_this3.state.filteredBonds});}));}}]);return InvestorPortal;}(React.Component);export default InvestorPortal;","map":{"version":3,"sources":["/Users/yueshanlin/Documents/capstoneProject/src/pages/InvestorPortal.js"],"names":["React","Swiper","Filter","FilterResult","filterResults","InvestorPortal","props","state","bonds","filteredBonds","hash","fetchBonds","bind","applyFilter","funding","fundingArray","bondType","bondTypeArray","year","yearArray","sdg","sdgsArray","temp","filter","bond","result","forEach","item","sdgs","indexOf","includes","series","bond_type","issue_year","toString","setState","fetch","then","response","json","data","map","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Swiper from '../components/Swiper/Swiper'\r\nimport Filter from '../components/Filter/Filter'\r\nimport FilterResult from '../components/FilterResult/FilterResult'\r\nimport { filterResults } from './config'\r\n\r\nclass InvestorPortal extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state ={\r\n      bonds:[],\r\n      filteredBonds:[],\r\n      hash :''\r\n    }\r\n    this.fetchBonds = this.fetchBonds.bind(this)\r\n    this.applyFilter = this.applyFilter.bind(this)\r\n  }\r\n\r\n  applyFilter(funding, fundingArray, bondType, bondTypeArray, year, yearArray, sdg, sdgsArray) {\r\n\r\n     var temp = this.state.bonds.filter(bond => {\r\n        if (sdg == 'all') return true;\r\n        else {\r\n          var result = false;\r\n          sdgsArray.forEach((item)=>{\r\n             if(bond.sdgs.indexOf(item) > -1)\r\n              result = true;\r\n\r\n          })\r\n          return result;\r\n        }\r\n        } )\r\n       temp =  temp.filter(bond => {\r\n        if (funding == 'all') return true;\r\n        else {\r\n          return fundingArray.includes(bond.series);\r\n        }\r\n        } )\r\n          temp =  temp.filter(bond => {\r\n        if (bondType == 'all') return true;\r\n        else {\r\n          return bondTypeArray.includes(bond.bond_type);\r\n          \r\n        }\r\n        } )\r\n            temp =  temp.filter(bond => {\r\n              if (year == 'all') return true;\r\n              else {\r\n                return yearArray.includes(bond.issue_year.toString());\r\n              }\r\n              } )\r\n        this.setState({filteredBonds: temp})\r\n  }\r\n\r\n  fetchBonds() {\r\n      fetch('http://localhost:8000/api/bond')\r\n    .then(response => response.json())\r\n    .then(data =>\r\n      this.setState({bonds:data, filteredBonds:data})\r\n      )\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.fetchBonds();\r\n  }\r\n\r\n\r\n  render() {\r\n      return (\r\n    <div className=\"Header\">\r\n      <Swiper />\r\n      <Filter changeFilter={this.applyFilter}  />\r\n      {\r\n        filterResults.map((item) => {\r\n          return <FilterResult result={item} bonds={this.state.filteredBonds} />\r\n        })\r\n      }\r\n\r\n    </div>);\r\n  }\r\n\r\n}\r\n\r\n\r\nexport default InvestorPortal;"]},"metadata":{},"sourceType":"module"}