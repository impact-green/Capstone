{"ast":null,"code":"import _classCallCheck from\"/Users/yueshanlin/Documents/capstoneProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/yueshanlin/Documents/capstoneProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/yueshanlin/Documents/capstoneProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/yueshanlin/Documents/capstoneProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/yueshanlin/Documents/capstoneProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _taggedTemplateLiteral from\"/Users/yueshanlin/Documents/capstoneProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  width: \",\"%;\\n  \\n  height: 56px;\\n  line-height: 56px;\\n  padding: 0 8px;\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  display: flex;\\n  margin-bottom: 6px;\\n  cursor: pointer;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React from'react';import styled from'styled-components';import _ from'lodash';import{unsdgs}from'../Filter/const';import'./SdgsAlignment.css';var SdgsAlignmentItemWrapper=styled.div(_templateObject());var ShowTotalLabel=styled.div(_templateObject2(),function(props){return props.width;});Array.prototype.unique=function(){var a=this.concat();for(var i=0;i<a.length;++i){for(var j=i+1;j<a.length;++j){if(a[i]===a[j])a.splice(j--,1);}}return a;};var SdgsAlignment=/*#__PURE__*/function(_React$Component){_inherits(SdgsAlignment,_React$Component);var _super=_createSuper(SdgsAlignment);function SdgsAlignment(props){var _this;_classCallCheck(this,SdgsAlignment);_this=_super.call(this,props);_this.getWidth=function(width,temp){var maxWidth=_.maxBy(temp,function(sdg){return sdg.total;}).total;// console.log('maxWidth', Number.parseInt(width / maxWidth * 100))\nreturn Number.parseInt(width/maxWidth*100);};_this.state={sdgsAlignment:[{value:0,total:0,showTotal:''}],sdgs:'all',selected:{}};_this.createData=_this.createData.bind(_assertThisInitialized(_this));_this.numberWithCommas=_this.numberWithCommas.bind(_assertThisInitialized(_this));_this.getWidth=_this.getWidth.bind(_assertThisInitialized(_this));_this.onChange=_this.onChange.bind(_assertThisInitialized(_this));return _this;}_createClass(SdgsAlignment,[{key:\"onChange\",value:function onChange(item){var temp=this.state.sdgs;if(this.state.selected.value==item.value){temp='all';}else{temp='part';}if(temp=='all'){this.setState({sdgs:temp,selected:{}});}else{this.setState({sdgs:temp,selected:item});}this.props.changeFilter(temp,item);}},{key:\"createData\",value:function createData(){var _this2=this;var array=[];this.props.projects.forEach(function(project){array=array.concat(project.sdgs).unique();});var result=[];array.forEach(function(item){result.push({value:item,total:0});});array.forEach(function(item){_this2.props.projects.forEach(function(project){if(project.sdgs.includes(item)){var temp=result.filter(function(obj){return obj.value===item;});temp[0].total+=project.use_of_proceeds;temp[0].showTotal='$'+_this2.numberWithCommas(temp[0].total);}});});// this.setState({sdgsAlignment:result});\nreturn result;}},{key:\"numberWithCommas\",value:function numberWithCommas(x){return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,\",\");}},{key:\"render\",value:function render(){var _this3=this;var temp=this.createData();var self=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"SdgsAlignment\"},temp.map(function(sdg){return/*#__PURE__*/React.createElement(SdgsAlignmentItemWrapper,{onClick:function onClick(){return self.onChange(sdg);}},/*#__PURE__*/React.createElement(\"img\",{width:\"56\",height:\"56\",src:unsdgs[sdg.value],alt:\"sdg\"}),/*#__PURE__*/React.createElement(ShowTotalLabel,{className:\"sdg-filter-item \".concat(_this3.state.sdgs=='part'&&_this3.state.selected.value==sdg.value?'active':''),width:_this3.getWidth(sdg.total,temp)},sdg.showTotal));}));}}]);return SdgsAlignment;}(React.Component);export default SdgsAlignment;","map":{"version":3,"sources":["/Users/yueshanlin/Documents/capstoneProject/src/components/DetailContent/SdgsAlignment.js"],"names":["React","styled","_","unsdgs","SdgsAlignmentItemWrapper","div","ShowTotalLabel","props","width","Array","prototype","unique","a","concat","i","length","j","splice","SdgsAlignment","getWidth","temp","maxWidth","maxBy","sdg","total","Number","parseInt","state","sdgsAlignment","value","showTotal","sdgs","selected","createData","bind","numberWithCommas","onChange","item","setState","changeFilter","array","projects","forEach","project","result","push","includes","filter","obj","use_of_proceeds","x","toString","replace","self","map","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport styled from 'styled-components'\r\nimport _ from 'lodash'\r\nimport { unsdgs } from '../Filter/const'\r\n\r\nimport './SdgsAlignment.css'\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst SdgsAlignmentItemWrapper = styled.div`\r\n  display: flex;\r\n  margin-bottom: 6px;\r\n  cursor: pointer;\r\n`\r\n\r\nconst ShowTotalLabel = styled.div`\r\n  width: ${props => props.width}%;\r\n  \r\n  height: 56px;\r\n  line-height: 56px;\r\n  padding: 0 8px;\r\n`\r\n\r\n\r\nArray.prototype.unique = function() {\r\n    var a = this.concat();\r\n    for(var i=0; i<a.length; ++i) {\r\n        for(var j=i+1; j<a.length; ++j) {\r\n            if(a[i] === a[j])\r\n                a.splice(j--, 1);\r\n        }\r\n    }\r\n\r\n    return a;\r\n};\r\n\r\nclass SdgsAlignment extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state ={\r\n      sdgsAlignment: [{value: 0, total:0, showTotal:''}],\r\n      sdgs: 'all',\r\n      selected: {}\r\n    }\r\n    this.createData = this.createData.bind(this);\r\n    this.numberWithCommas = this.numberWithCommas.bind(this);\r\n    this.getWidth = this.getWidth.bind(this);\r\n    this.onChange = this.onChange.bind(this);\r\n  }\r\n\r\n  getWidth = (width, temp) => {\r\n  const maxWidth = _.maxBy(temp, (sdg) => sdg.total).total\r\n  // console.log('maxWidth', Number.parseInt(width / maxWidth * 100))\r\n\r\n  return Number.parseInt(width / maxWidth * 100)\r\n}\r\n  onChange(item) {\r\n    var temp = this.state.sdgs;\r\n    if(this.state.selected.value == item.value) {\r\n      temp = 'all';\r\n    }else{\r\n      temp = 'part';\r\n    }\r\n    if(temp == 'all') {\r\n      this.setState({sdgs:temp, selected: {} })\r\n    }\r\n    else {\r\n          this.setState({sdgs:temp, selected: item })\r\n    }\r\n\r\n    this.props.changeFilter(temp, item)\r\n  }\r\n\r\n  createData() {\r\n    var array =[];\r\n    this.props.projects.forEach((project)=>{\r\n      array = array.concat(project.sdgs).unique();\r\n    })\r\n    var result = [];\r\n     array.forEach((item) => {\r\n      result.push({value: item, total: 0});\r\n     })\r\n    array.forEach((item) => {\r\n       this.props.projects.forEach(( project )=>{\r\n          if(project.sdgs.includes(item)) {\r\n            var temp = result.filter(obj => {\r\n              return obj.value === item\r\n            })\r\n            temp[0].total += project.use_of_proceeds;\r\n            temp[0].showTotal = '$'+this.numberWithCommas(temp[0].total);\r\n          }\r\n       })\r\n    })\r\n\r\n   // this.setState({sdgsAlignment:result});\r\n    return result;\r\n  \r\n  }\r\n   numberWithCommas(x) {\r\n    return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n  }\r\n\r\n\r\n  render (){\r\n    var temp = this.createData();\r\n    var self = this;\r\n  return (\r\n    <div className=\"SdgsAlignment\">\r\n      {\r\n        \r\n\r\n        temp.map(sdg => {\r\n          return <SdgsAlignmentItemWrapper onClick={()=>self.onChange(sdg)}>\r\n            <img width=\"56\" height=\"56\" src={unsdgs[sdg.value]} alt='sdg' />\r\n            <ShowTotalLabel className = {`sdg-filter-item ${this.state.sdgs == 'part' && this.state.selected.value == sdg.value ? 'active' : ''}`} width={this.getWidth(sdg.total, temp)}>{sdg.showTotal}</ShowTotalLabel>\r\n          </SdgsAlignmentItemWrapper>\r\n        })\r\n      }\r\n\r\n    </div >\r\n  );\r\n}\r\n}\r\n\r\nexport default SdgsAlignment;"]},"metadata":{},"sourceType":"module"}