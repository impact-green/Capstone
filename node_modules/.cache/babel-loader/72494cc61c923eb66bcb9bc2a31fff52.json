{"ast":null,"code":"import _classCallCheck from\"/Users/yueshanlin/Documents/capstoneProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/yueshanlin/Documents/capstoneProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/yueshanlin/Documents/capstoneProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/yueshanlin/Documents/capstoneProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/yueshanlin/Documents/capstoneProject/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import*as d3 from'd3';import{scaleLinear}from'd3-scale';import{max}from'd3-array';import{select}from'd3-selection';var AnnualWaterReduction=/*#__PURE__*/function(_Component){_inherits(AnnualWaterReduction,_Component);var _super=_createSuper(AnnualWaterReduction);function AnnualWaterReduction(props){var _this;_classCallCheck(this,AnnualWaterReduction);_this=_super.call(this,props);_this.createBarChart=_this.createBarChart.bind(_assertThisInitialized(_this));return _this;}_createClass(AnnualWaterReduction,[{key:\"componentDidMount\",value:function componentDidMount(){this.createBarChart();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){this.createBarChart();}},{key:\"createBarChart\",value:function createBarChart(){var data=this.props.data;var margin={top:30,right:0,bottom:30,left:0};var svgWidth=445.2,svgHeight=290.65;var height=svgHeight-margin.top-margin.bottom,width=svgWidth-margin.left-margin.right;var sourceNames=[],sourceCount=[];var color=\"#ABC24D\";var topColor='#ABC24D';var x=d3.scaleBand().rangeRound([0,width]).padding(0.1),y=d3.scaleLinear().rangeRound([height,0]);for(var key in data){if(data.hasOwnProperty(key)){sourceNames.push(key);sourceCount.push(parseInt(data[key]));}}x.domain(sourceNames);y.domain([0,d3.max(sourceCount,function(d){return d;})]);var svg=select(this.node).append(\"svg\");svg.attr('height',svgHeight).attr('width',svgWidth);svg=svg.append(\"g\").attr(\"transform\",\"translate(\"+margin.left+\",\"+margin.top+\")\");svg.append(\"g\").attr(\"class\",\"axis axis--x\").attr(\"transform\",\"translate(0,\"+height+\")\").call(d3.axisBottom(x));// Create rectangles\nvar bars=svg.selectAll('.bar').data(sourceNames).enter().append(\"g\");bars.append('rect').attr('class','bar').attr(\"x\",function(d){return x(d);}).attr(\"y\",function(d){return y(data[d]);}).attr(\"fill\",color).attr(\"width\",x.bandwidth()).attr(\"height\",function(d){return height-y(data[d]);});bars.append(\"text\").text(function(d){return data[d];}).attr(\"x\",function(d){return x(d)+x.bandwidth()/2;}).attr(\"y\",function(d){return y(data[d])-5;}).attr(\"font-family\",\"Roboto\").attr(\"font-size\",\"14px\").attr(\"fill\",\"black\").attr(\"text-anchor\",\"middle\");}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"svg\",{ref:function ref(node){return _this2.node=node;},width:445.2,height:290.65});}}]);return AnnualWaterReduction;}(Component);export default AnnualWaterReduction;","map":{"version":3,"sources":["/Users/yueshanlin/Documents/capstoneProject/src/components/DetailContent/AnnualWaterReduction.js"],"names":["React","Component","d3","scaleLinear","max","select","AnnualWaterReduction","props","createBarChart","bind","data","margin","top","right","bottom","left","svgWidth","svgHeight","height","width","sourceNames","sourceCount","color","topColor","x","scaleBand","rangeRound","padding","y","key","hasOwnProperty","push","parseInt","domain","d","svg","node","append","attr","call","axisBottom","bars","selectAll","enter","bandwidth","text"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport * as d3 from 'd3';\nimport { scaleLinear } from 'd3-scale'\nimport { max } from 'd3-array'\nimport { select } from 'd3-selection'\n\nclass AnnualWaterReduction extends Component {\n   constructor(props){\n      super(props)\n      this.createBarChart = this.createBarChart.bind(this)\n   }\n\n   componentDidMount() {\n      this.createBarChart()\n   }\n   componentDidUpdate() {\n      this.createBarChart()\n   }\n\n\n   createBarChart() {\n\nlet data = this.props.data;\nlet margin = {top: 30, right: 0, bottom: 30, left: 0};\nlet svgWidth = 445.2, svgHeight = 290.65;\nlet height = svgHeight- margin.top- margin.bottom, width = svgWidth - margin.left - margin.right;\nlet sourceNames = [], sourceCount = [];\nconst color = \"#ABC24D\";\nconst topColor = '#ABC24D';\n\n\nlet x = d3.scaleBand().rangeRound([0, width]).padding(0.1),\n    y = d3.scaleLinear().rangeRound([height, 0]);\nfor(let key in data){\n    if(data.hasOwnProperty(key)){\n        sourceNames.push(key);\n        sourceCount.push(parseInt(data[key]));\n    }\n}\nx.domain(sourceNames);\ny.domain([0, d3.max(sourceCount, function(d) { return d; })]);\n\nlet svg = select(this.node).append(\"svg\");\nsvg.attr('height', svgHeight)\n    .attr('width', svgWidth);\n\nsvg = svg.append(\"g\")\n         .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\nsvg.append(\"g\")\n    .attr(\"class\", \"axis axis--x\")\n    .attr(\"transform\", \"translate(0,\" + height + \")\")\n    .call(d3.axisBottom(x));\n\n// Create rectangles\nlet bars = svg.selectAll('.bar')\n    .data(sourceNames)\n    .enter()\n    .append(\"g\");\n\nbars.append('rect')\n    .attr('class', 'bar')\n    .attr(\"x\", function(d) { return x(d); })\n    .attr(\"y\", function(d) { return y(data[d]); })\n    .attr(\"fill\", color)\n    .attr(\"width\", x.bandwidth())\n    .attr(\"height\", function(d) { return height - y(data[d]); });\n    \nbars.append(\"text\")\n    .text(function(d) { \n        return data[d];\n    })\n    .attr(\"x\", function(d){\n        return x(d) + x.bandwidth()/2;\n    })\n    .attr(\"y\", function(d){\n        return y(data[d]) - 5;\n    })\n    .attr(\"font-family\" , \"Roboto\")\n    .attr(\"font-size\" , \"14px\")\n    .attr(\"fill\" , \"black\")\n    .attr(\"text-anchor\", \"middle\");\n\n\n\n   }\n\nrender() {\n          return <svg ref={node => this.node = node}\n      width={445.2} height={290.65}>\n      </svg>\n   }\n}\nexport default AnnualWaterReduction\n\n\n "]},"metadata":{},"sourceType":"module"}